<!DOCTYPE html>
<html style="background:black;">
<meta charset="utf-8">
<script src="canvasengine-1.3.2.all.js"></script>
<script src="novent-reader.js"></script>
<script src="novent-parser.js"></script>
<!--<script src="novent.js"></script>-->
<canvas id="canvas_id" width="2048" height="2736" style="background:black"></canvas>

<script id="novent-descriptor" type="application/xml">
<novent>
	<button src="images/button.png" x="465" y="1300" width="71" height="71" />
	
	<page name="intro">
		<materials>
			<image name="begin" src="images/begin.png" x="353" y="1200" width="295" height="87" opacity="0" />
			<sound name="beginSound" src="musics/cover.mp3" volume="0.1"/>
		</materials>
		
		<events>
			<event>
				<animate target="image:begin" property="opacity" value="0.5" duration="60" ease="easeInQuad">
					<wiggle name="test" target="image:begin" property="scaleX" amplitude="0.5" frequency="15" ease="easeInQuad"/>
					<end />
				</animate>
			</event>
			
			<event>
				<play target="sound:beginSound" loop="stop"/>
				<animate target="image:begin" property="opacity" value="0" duration="120" ease="easeInQuad">
					<stop target="test" />
					<end />
				</animate>
			</event>
			
			<event>
				<animate target="sound:beginSound" property="volume" value="0" duration="120" ease="easeInQuad">
					<stop target="test" />
					<end />
				</animate>
			</event>
		</events>
	</page>
	
	<page name="cover">
		<materials>
			<image name="background" src="images/Storyboard1.png" x="0" y="0" width="1000" height="1418" opacity="0" />
			<animation name="mountainLightRight" src="animations/Light Mountains Right Begin.png" frames="120" height="300" width="300" frequency="2" x="830" y="640" />
			<animation name="mountainLightRightLoop" src="animations/Light Mountains Right Loop.png" frames="150" height="300" width="300" frequency="2" x="830" y="640" />
			<animation name="mountainLightLeft" src="animations/Light Mountains Left Begin.png" frames="120" height="300" width="300" frequency="2" x="-70" y="680" />
			<animation name="mountainLightLeftLoop" src="animations/Light Mountains Left Loop.png" frames="150" height="300" width="300" frequency="2" x="-70" y="680" />
			<text name="title" width="1000" x="0" y="1100" align="center" font="Quicksand" size="60px" color="white" opacity="0" lineHeight="70">A MAGIC OF BLOOD AND SOULS</text>
			<font name="Quicksand" src="fonts/Quicksand-Light.ttf" />
		</materials>
		
		<events>
			<event>
				<animate target="image:background" property="opacity" value="1" duration="120" ease="easeInQuad">
					<play target="animation:mountainLightRight" loop="remove">
						<play target="animation:mountainLightRightLoop" loop="loop" />
						<end />						
					</play>
					<play target="animation:mountainLightLeft" loop="remove">
						<play target="animation:mountainLightLeftLoop" loop="loop" />
					</play>
				</animate>
			</event>
			
			<event>
				<wait duration="120">
					<animate target="text:title" property="opacity" value="1" duration="120" ease="easeInQuad">
						<end />
					</animate>
				</wait>
			</event>
			
			<event>
				<animate target="animation:mountainLightRightLoop" property="opacity" value="0" duration="120" ease="easeInQuad">
					<end />
				</animate>
			</event>
		</events>
	</page>
</novent>
</script>

<script>
	var noventDescriptor = document.getElementById("novent-descriptor").textContent;
	
	var novent = NoventParser.read(noventDescriptor);
	if(novent instanceof Array) {
		document.getElementById("canvas_id").style.display = "none";
		novent.forEach(function(e) {
			document.body.innerHTML = document.body.innerText + e.toString() + "<br/>\n";
		});
	} else {
		novent.start();
	}
</script>
</html>