function InvalidInputException(e,n){this.name="InvalidInputException",this.input=e,this.message=n}function MissingLibraryException(e){this.name="MissingLibraryException",this.message=e}function UnknownNoventExeption(e,n){this.name="UnknownNoventExeption",this.message=n,this.name=e}if(function(){"use strict";function e(){}function n(e,n){for(var t=e.length;t--;)if(e[t].listener===n)return t;return-1}function t(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var n,t,i=this._getEvents();if(e instanceof RegExp){n={};for(t in i)i.hasOwnProperty(t)&&e.test(t)&&(n[t]=i[t])}else n=i[e]||(i[e]=[]);return n},i.flattenListeners=function(e){var n,t=[];for(n=0;n<e.length;n+=1)t.push(e[n].listener);return t},i.getListenersAsObject=function(e){var n,t=this.getListeners(e);return t instanceof Array&&(n={},n[e]=t),n||t},i.addListener=function(e,t){var i,r=this.getListenersAsObject(e),o="object"==typeof t;for(i in r)r.hasOwnProperty(i)&&n(r[i],t)===-1&&r[i].push(o?t:{listener:t,once:!1});return this},i.on=t("addListener"),i.addOnceListener=function(e,n){return this.addListener(e,{listener:n,once:!0})},i.once=t("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var n=0;n<e.length;n+=1)this.defineEvent(e[n]);return this},i.removeListener=function(e,t){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=n(o[r],t),i!==-1&&o[r].splice(i,1));return this},i.off=t("removeListener"),i.addListeners=function(e,n){return this.manipulateListeners(!1,e,n)},i.removeListeners=function(e,n){return this.manipulateListeners(!0,e,n)},i.manipulateListeners=function(e,n,t){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof n||n instanceof RegExp)for(i=t.length;i--;)o.call(this,n,t[i]);else for(i in n)n.hasOwnProperty(i)&&(r=n[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var n,t=typeof e,i=this._getEvents();if("string"===t)delete i[e];else if(e instanceof RegExp)for(n in i)i.hasOwnProperty(n)&&e.test(n)&&delete i[n];else delete this._events;return this},i.removeAllListeners=t("removeEvent"),i.emitEvent=function(e,n){var t,i,r,o,s,a=this.getListenersAsObject(e);for(o in a)if(a.hasOwnProperty(o))for(t=a[o].slice(0),r=0;r<t.length;r++)i=t[r],i.once===!0&&this.removeListener(e,i.listener),s=i.listener.apply(this,n||[]),s===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},i.trigger=t("emitEvent"),i.emit=function(e){var n=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,n)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define(function(){return e}):"object"==typeof module&&module.exports?module.exports=e:r.EventEmitter=e}.call(this),function(e,n,t){"function"==typeof define&&define.amd?define(t):"object"==typeof exports?module.exports=t():n[e]=t()}("heir",this,function(){"use strict";var e={inherit:function(n,t,i){var r=n.prototype=e.createObject(t.prototype);r.constructor=n,(i||"undefined"==typeof i)&&(n._super=t.prototype)},createObject:Object.create||function(e){var n=function(){};return n.prototype=e,new n},mixin:function(n,t){return e.merge(n.prototype,t)},merge:function(n,t){var i;for(i in t)e.hasOwn(t,i)&&(n[i]=t[i])},hasOwn:function(e,n){return Object.prototype.hasOwnProperty.call(e,n)}};return e}),"undefined"==typeof createjs)throw new MissingLibraryException("missing library createjs");var NoventEngine=NoventEngine||{};!function(){"use strict";function e(e,t,i){if(!e)throw new InvalidInputException("page","missing parameter page");return e.events[t]?e.events[t]:(e.events[t]=new n(e,t,i),e.events[t])}NoventEngine.event=e;var n=function(e,n,t){function i(){return o.page.novent.trigger("eventstart"),o.page.novent.waiting=!1,o.function(o.page.container,o.page).then(function(){return o.page.index++,o.page.novent.waiting=!0,o.page.index==o.page.events.length?(o.page.novent.index++,o.page.novent.trigger("pageend"),o.page.novent.play()):void o.page.novent.trigger("eventend")})}function r(e,n){return new Promise(function(i){t(i,e,n)})}var o=this;return o.page=e,o.ordinal=n,o.function=r,o.play=i,o}}(),function(){"use strict";function e(e,n,i,r,o){if(!e||n||i||r){var s=new t(e,n,i,r);return NoventEngine.novents||(NoventEngine.novents={}),NoventEngine.novents[e]=s,s}if(!NoventEngine.novents||!NoventEngine.novents[e])throw new UnknownNoventExeption(e,"unknown novent with name "+e);return NoventEngine.novents[e]}function n(e){e.style.position="fixed",e.style.top=0,e.style.left=0,e.style.bottom=0,e.style.right=0,e.style.margin="auto";var n=window.innerWidth,t=window.innerHeight,i=t/n,r=e.height/e.width;i<=r?n=t/r:t=n*r,e.style.width=n+"px",e.style.height=t+"px"}NoventEngine.novent=e;var t=function(e,t,i,r,o){function s(e){if(!e||""===e)throw new InvalidInputException("name","missing parameter name");return e}function a(e){if(!e||""===e)throw new InvalidInputException("canvasId","missing parameter canvasId");var n=document.getElementById(e);if(!n)throw new InvalidInputException("canvasId","invalid canvasId, no canvas found with id "+e);return n}function u(e,n){if(!n||""===n)throw new InvalidInputException(e,"missing parameter "+e);if(n=Number.parseInt(n),!Number.isInteger(n)||n<0)throw new InvalidInputException(e,"invalid pramameter "+e+", should be a positive integer");return n}function c(e,n,t,i){return NoventEngine.page(l,e,n,t,i)}function p(){return 0===l.index&&l.waiting?l.page(l.index).play():l.index!=l.pages.length&&l.waiting?l.page(l.index).play():void(l.index==l.pages.length&&l.waiting&&l.trigger("complete"))}function v(){l.page(l.index).load()}function d(){createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",l.stage),o&&o(l.stage,l),window.onresize=function(){n(l.canvas)},n(l.canvas)}var l=this;return l.name=s(e),l.canvas=a(t),l.width=l.canvas.width=u("width",r),l.height=l.canvas.height=u("height",i),l.pages=[],l.page=c,l.index=0,l.scope={},l.stage=new createjs.Stage(l.canvas),l.waiting=!0,l.play=p,l.load=v,d(),l};heir.inherit(t,EventEmitter)}(),function(){"use strict";function e(e,t,i,r,o){if(!e)throw new InvalidInputException("novent","missing parameter novent");return e.pages[t]?e.pages[t]:(e.pages[t]=new n(e,t,i,r,o),e.pages[t])}NoventEngine.page=e;var n=function(e,n,t,i,r){function o(e,n){if(void 0===n||""===n)throw new InvalidInputException(e,"missing parameter "+e);if(n=Number.parseInt(n),!Number.isInteger(n)||n<0)throw new InvalidInputException(e,"invalid pramameter "+e+", should be a positive integer");return n}function s(e,n){return NoventEngine.event(p,e,n)}function a(){if(p.loading=!0,r&&0!==Object.keys(r).length){for(var e in r)p.loadQueue.loadFile({id:e,src:r[e]});p.loadQueue.on("fileload",function(e){p.lib[e.item.id]=e.result}),p.loadQueue.on("complete",function(){p.loading=!1,p.trigger("loadComplete")}),p.loadQueue.load()}else p.loadQueue.progress=1,p.loadQueue.dispatchEvent("progress"),p.loadQueue.dispatchEvent("complete"),p.loading=!1,p.trigger("loadComplete");p.ordinal!=p.novent.pages.length-1&&p.on("loadComplete",p.novent.page(p.ordinal+1).load)}function u(){if(0===p.index){if(p.loadQueue.loaded)return c(),p.events[p.index].play();p.on("loadComplete",function(){return c(),p.events[p.index].play()}),p.loading||p.load()}else if(p.index!=p.events.length)return p.events[p.index].play()}function c(){i&&i(p.container,p);var e=function(e,n,t){return e.index>n.index?1:e.index<n.index?-1:0};p.container.sortChildren(e),p.novent.stage.addChild(p.container),p.novent.index>0&&p.novent.stage.removeChild(p.novent.pages[index-1].container)}var p=this;if(!e)throw new InvalidInputException("novent","missing parameter novent");return p.ordinal=o("ordinal",n),p.novent=e,p.name=t,p.events=[],p.event=s,p.index=0,p.scope={},p.container=new createjs.Container,p.play=u,p.loading=!1,p.loadQueue=new createjs.LoadQueue((!0)),p.load=a,p.lib={},p};heir.inherit(n,EventEmitter)}();